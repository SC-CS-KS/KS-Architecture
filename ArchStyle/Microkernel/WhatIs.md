# WhatIs
```md
微内核模式（Microkernel）
当您的应用程序具有一组核心职责和一组可互换部分时，微内核模式或插件模式非常有用。
微内核将提供应用程序的入口点和一般流程，而不知道不同的插件正在做什么。
```
## 组成
```md
两部分组成：核心系统和插件模块。
微内核主要负责插件的生命周期管理和控制插件模块。
插件模块则负责插件的加载、替换和卸载。
```
## 优点
```md
良好的功能延伸性（extensibility），需要什么功能，开发一个插件即可
功能之间是隔离的，插件可以独立的加载和卸载，使得它比较容易部署，
可定制性高，适应不同的开发需要
可以渐进式地开发，逐步增加功能
```
```md
1. 为递进设计和增量开发提供了方便。
  可以先实现一个稳固的核心系统，然后逐渐地增加功能和特性。
2. 和事件驱动架构一样，也可避免单一组件失效，而造成整个系统崩溃，容错性好。
  内核只需要重新启动这个组件，不致于影响其他功能。
```
```md
这种模式提供了很大的灵活性和可扩展性。
某些实现允许在应用程序运行时添加插件。
微内核和插件可以由独立的团队开发。
```
## 缺点
```md
扩展性（scalability）差，内核通常是一个独立单元，不容易做成分布式
开发难度相对较高，因为涉及到插件与内核的通信，以及内部的插件登记机制
```
```md
1. 由于主要的微内核很小，所以无法对整体进行优化。
  每个插件都各自管各自的，甚至可能是由不同团队负责维护。
2. 一般来说，为了避免在单个应用程序中的复杂度爆炸，
  很少会启用插件嵌套插件的模式，所以插件中的代码复用度会差一些。
```
```md
决定什么属于微内核，哪些不属于微内核是很困难的。
预定义的API可能不适合未来的插件。
```
```md
微核架构的设计和开发难度较高，这就注定它在企业产品中用得不多，虽然它的优点还不少。
```
## 场景
```md
1. 可以嵌入或者作为其它架构模式的一部分。例如事件驱动架构中，“上帝”的「事件转换」就可以使用微内核架构实现。
2. 业务逻辑虽然不同，但是运行逻辑相同的场景。比如，定期任务和作业调度类应用。
3. 具有清晰的增量开发预期的场景。
```
## 应用
* 任务调度器
```md
	微内核可以包含用于调度和触发任务的所有逻辑，而插件包含特定任务。
	只要插件遵循预定义的API，微内核就可以触发它们，而无需了解实现细节。
```
* 工作流程
```md
	工作流的实现包含诸如不同步骤的顺序，评估步骤结果，决定下一步是什么等概念。
	步骤的具体实现对于工作流的核心代码来说并不重要。
```